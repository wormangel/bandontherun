{% extends 'base.html' %}
{% load url from future %}
        
{% block body %}
    {% if not error_msg %}
        <h2>{{ band.name }}</h2>
        <dl>
            <dt>URL:</dt>
            <dd><a href="{{ band.url }}">{{ band.url }}</a></dd>
            <dt>Bio:</dt>
            <dd>{{ band.bio|safe }}</dd>
        </dl>

        <a href="{% url 'edit-band' band.id %}"><button class="btn">Edit</button></a>

        <h4>Members:</h4>
        <ul id="members">
        {% for member in band.member_list %}
            <li>
                <form action="/band/{{ band.id }}/member/{{ member.username }}/remove" method="post">
                    {% csrf_token %}
                    <a href="{% url 'show-user' member.username %} ">{{ member.username }}</a>
                    <button class="btn inline small" type="submit">Revoke</button>
                </form>
            </li>
        {% endfor %}
        </ul>

        <h4>Add a new member:</h4>
        <form action="/band/{{ band.id }}/member/add" method="post">
            {% csrf_token %}
            <input id="username" name="username" type="text" placeholder="member username" />
            <button class="btn inline primary" type="submit">Add</button>
        </form>

        <!--(Form abaixo será mostrado se não existir o usuário. Escondê-lo quando for aplicar css.)
        <form action="/user/invite" method="post">
        {% csrf_token %}
        <label for="email">
          <input id="email" name="email" type="email" placeholder="new member email" />
        </label>
        <input type="submit" value="Invite" />
        </form>-->
        
        <h4>Files:</h4>
        <form enctype="multpart/form-data" action="/band/{{ band.id }}/upload" method="post"> 
            {% csrf_token %} {{ upload_form.as_p }}
            <button class="btn inline primary" type="submit"/>Upload</button>
        </form>   
        
        <script src="public/js/libs/jquery.tablesorter.min.js"></script>
        <script >
              $(function() {
                $("table#sortTableExample").tablesorter({ sortList: [[1,0]] });
              });
        </script>
        <table class="zebra-striped">
            <thead>
              <tr>
                <th class="header headerSortUp">Name</th>
                <th class="yellow header">Filename</th>
                <th class="blue header">Size</th>
                <th class="green header">Download</th>
                <th class="red  header">Delete</th>
              </tr>
            </thead>
            <tbody>
            {% for file in band.file_list %}
                <tr>
                    <td name="name" type="text" > {{ file.name }} </td>
                    <td name="filename" type="text" > {{ file.filename }} </td>
                    <td name="size" type="text" > {{ file.size }} </td>
                    <td name="download" type="text" > <button class="btn inline small" type="submit">Download</button> </td>
                    <td name="delete" type="text" > <button class="btn inline small" type="submit">Delete</button> </td>
                </tr>     
            {% endfor %}
            </tbody>
        </table>   
    {% else %}
        <div class="alert-message error">
            {{ error_msg }}
        </div>
    {% endif %}
{% endblock %}

