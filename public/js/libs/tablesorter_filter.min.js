(function(a){a.extend({tablesorterFilter:new function(){function d(b){if(b.config.debug){var c=new Date}for(var d=0;d<b.config.filter.length;d++)a(b.config.filter[d].filterContainer).val("").get(0).lastValue="";var e=b.config.cache.row;a.tablesorter.clearTableBody(b);for(var d=0;d<e.length;d++){a(b.tBodies[0]).append(e[d])}a(b).trigger("update");a(b).trigger("appendCache");a(b).trigger("sorton",[b.config.sortList]);if(b.config.debug){a.tablesorter.benchmark("Clear filter:",c)}a(b).trigger("filterCleared");return b}function c(b){if(b.config.debug){var c=new Date}var d=[];var e=[];for(var f=0;f<b.config.filter.length;f++){var g=b.config.filter[f];var h=a(g.filterContainer);e[f]=g.filterColumns;var i=jQuery.trim(h.val()).replace(/\s+/g," ");if(i.length!=0){var j=/^([a-z]+):(.+)/;var k=j.exec(i);if(k!==null){var l=k[1];i=k[2];for(var m=0;m<g.columns.length;m++){if(g.columns[m].indexOf(l)===0){g.filterColumns=[m];break}}}var n=g.filterCaseSensitive;d.push({caseSensitive:n,words:n?i.split(" "):i.toLowerCase().split(" "),findStr:g.filterColumns?"td:eq("+g.filterColumns.join("),td:eq(")+")":"",filterFunction:g.filterFunction})}g.filterColumns=e[f]}var o=d.length;if(o==0){var p=function(){var a=jQuery(this);r[r.length]=a}}else{var p=function(){var a=jQuery(this);for(var b=0;b<o;b++){if(!d[b].filterFunction((d[b].findStr?a.find(d[b].findStr):a).text(),d[b].words,d[b].caseSensitive)){return true}}r[r.length]=a}}var q=b.config.cache.row;var r=[];var s=q.length;for(var f=0;f<s;f++){q[f].each(p)}a.tablesorter.clearTableBody(b);var t=r.length;for(var f=0;f<t;f++){a(b.tBodies[0]).append(r[f])}a(b).trigger("update");if(r.length){a(b).trigger("appendCache");a(b).trigger("sorton",[b.config.sortList])}if(b.config.debug){a.tablesorter.benchmark("Apply filter:",c)}a(b).trigger("filterEnd");return b}function b(a,b,c){var d=c?a:a.toLowerCase();for(var e=0;e<b.length;e++){if(b[e].charAt(0)=="-"){if(d.indexOf(b[e].substr(1))!=-1)return false}else if(d.indexOf(b[e])==-1)return false}return true}this.defaults={filterContainer:"#filter-box",filterClearContainer:"#filter-clear-button",filterColumns:null,filterCaseSensitive:false,filterWaitTime:500,filterFunction:b,columns:[]};this.construct=function(){var b=arguments;return this.each(function(){function h(a,b){var d=a.value;if(d!=a.lastValue||b){a.lastValue=d;c(g)}}this.config.filter=new Array(b.length);var e=this.config;e.filter=new Array(b.length);for(var f=0;f<b.length;f++)e.filter[f]=a.extend(this.config.filter[f],a.tablesorterFilter.defaults,b[f]);var g=this;var i=new Array(b.length);for(var f=0;f<b.length;f++){var j=a(e.filter[f].filterContainer);if(j.length)j[0].filterIndex=f;j.keyup(function(b,c){var d=this.filterIndex;if(undefined!==c)a(this).val(c);var f=this;if(f.keyCode==13||undefined!==c){var g=1;var j=true}else{var g=e.filter[d].filterWaitTime||500;var j=false}var k=function(){h(f,j)};clearTimeout(i[d]);i[d]=setTimeout(k,g);return false});if(e.filter[f].filterClearContainer){var j=a(e.filter[f].filterClearContainer);if(j.length){j[0].filterIndex=f;j.click(function(){var b=this.filterIndex;var d=a(e.filter[b].filterContainer);d.val("");d[0].lastValue="";c(g);if(d[0].type!="hidden")d.focus()})}}}a(g).bind("doFilter",function(){c(g)});a(g).bind("clearFilter",function(){d(g)})})}}});a.fn.extend({tablesorterFilter:a.tablesorterFilter.construct})})(jQuery)